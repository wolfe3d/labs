<!DOCTYPE HTML>
<?php
$fieldId = rand(100,1000000);

$mysqlConn= mysqli_connect('localhost', 'donutsrgreat', 'RkRk7Yu1hCoAHv4Q', 'wolfescience');
/* check connection */
if ($mysqlConn->connect_errno) {
   printf("Connect failed: %s\n", $mysqlConn->connect_error);
   exit();
}
/*check to see if id exists*/
$query = "select `field`, `date`, `width`, `height`, `bunnies`, `cats`, `dogs` from `wolfe_fieldgenerator` where `field` = $fieldId";
$result = $mysqlConn->query($query) or error_log("\n<br />Warning: query failed:$query. " . $mysqlConn->error. ". At file:". __FILE__ ." by " . $_SERVER['REMOTE_ADDR'] .".");
if (mysqli_num_rows($result)==0) {
	/*Generate new values*/
	$fieldWidth = rand(1000,2000);
	$fieldHeight = rand(1000,2000);
	$numBunnies = rand(1000,4000);
	$numCats = rand(500,1500);
	$numDogs = rand(100,800);
	/*insert new field*/
	$query = "INSERT INTO `wolfe_fieldgenerator` (`field`, `date`, `width`, `height`, `bunnies`, `cats`, `dogs`) VALUES ('$fieldId', CURRENT_TIMESTAMP, '$fieldWidth', '$fieldHeight', '$numBunnies', '$numCats', '$numDogs');";
	$result = $mysqlConn->query($query) or error_log("\n<br />Warning: query failed:$query. " . $mysqlConn->error. ". At file:". __FILE__ ." by " . $_SERVER['REMOTE_ADDR'] .".");
}
else
{
	$row = $result->fetch_assoc();
	/*Read old values into variables*/
	$fieldWidth = $row['width'];
	$fieldHeight = $row['height'];
	$numBunnies = $row['bunnies'];
	$numCats = $row['cats'];
	$numDogs = $row['dogs'];
}
/*Convert integers to hexadecimal to hide numbers in code*/
$numBunniesHex = dechex($numBunnies);
$numCatsHex = dechex($numCats);
$numDogsHex = dechex($numDogs);
?>
<html>
  <head>
  <title>Field Generator</title>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>

 <h1>Field</h1>
  <div style="text-indent:40px">
	<div>ID: <?=$fieldId?></div>  
    <div>Width = <?=$fieldWidth?> m</div>
	<div>Height = <?=$fieldHeight?> m</div>
	<div>Length of Side of Quadrat <input type="text" id="quadrantSize" name="quadrantSize" value="0"> m</div>
	<div>Mouse location in field: (<span id=mX></span>,<span id=mY></span>)</div>
  </div>
<div id="paint" style="padding:20px;width:<?=$fieldWidth?>px;height:<?=$fieldHeight?>px;">
 		<canvas id="myCanvas"></canvas>
</div>

    <script>
var _0x162d=['DhjHy2u=','CgfNzvK=','y2XVC2vqyxrO','D2fYBG==','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK=','B2zMC2v0tgvMDa==','DgvZDa==','iZaWnJzMzG==','DMfSDwu=','yxbWBhK=','C3rYB2TLu3r5Bgu=','CMvJDa==','z2v0uhjVCgvYDhLwywX1zq==','y2z1uM0=','yxjJ','iZaWq0m5oq==','tuzZrgO=','DgfIBgu=','y29UC3rYDwn0B3i=','C3rYB2TL','D2LKDgG=','ywrKrxzLBNrmAxn0zw5LCG==','B2zMC2v0vg9W','quHkr3e=','Dgv4DenVBNrLBNq=','y29UC29Szq==','CxvHzhjHBNrtAxPL','CM91BMq=','CMv0DxjUic8IicSGDgHPCYaRiciV','AgvPz2H0','zxjYB3i=','CMfUzg9T','z2v0rwXLBwvUDej5swq=','v0z2rey=','CMv0DxjUicHMDw5JDgLVBIGPia==','yMvNAw5qyxrO','i2zMmda2nG==','BxLdyw52yxm=','xIHBxIbDkYGGk1TEif0RksSPk1TEif19','zxHJzxb0Aw9U','zgvIDwC=','BKDSzhy=','Bg9N','CgfPBNq=','Aw5MBW==','Bw91C2vKB3DU','Bw91C2vTB3zL','BgLUzvDPzhrO','CgfNzvG='];(function(_0x65b2cf,_0x162d05){var _0x1cae09=function(_0x20c076){while(--_0x20c076){_0x65b2cf['push'](_0x65b2cf['shift']());}},_0x1ecf5b=function(){var _0x588307={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5508cf,_0x26ebe0,_0x352148,_0x36f163){_0x36f163=_0x36f163||{};var _0x296265=_0x26ebe0+'='+_0x352148,_0x5caff0=0x0;for(var _0xe4cb63=0x0,_0x5391f3=_0x5508cf['length'];_0xe4cb63<_0x5391f3;_0xe4cb63++){var _0x479fac=_0x5508cf[_0xe4cb63];_0x296265+=';\x20'+_0x479fac;var _0x4c51d4=_0x5508cf[_0x479fac];_0x5508cf['push'](_0x4c51d4),_0x5391f3=_0x5508cf['length'],_0x4c51d4!==!![]&&(_0x296265+='='+_0x4c51d4);}_0x36f163['cookie']=_0x296265;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5e7bd5,_0x44f9bc){_0x5e7bd5=_0x5e7bd5||function(_0x2583d1){return _0x2583d1;};var _0x2bc453=_0x5e7bd5(new RegExp('(?:^|;\x20)'+_0x44f9bc['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xe92d=function(_0x2f49af,_0x5bf3f3){_0x2f49af(++_0x5bf3f3);};return _0xe92d(_0x1cae09,_0x162d05),_0x2bc453?decodeURIComponent(_0x2bc453[0x1]):undefined;}},_0x2d071f=function(){var _0x1078ae=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1078ae['test'](_0x588307['removeCookie']['toString']());};_0x588307['updateCookie']=_0x2d071f;var _0x58ec17='';var _0x398864=_0x588307['updateCookie']();if(!_0x398864)_0x588307['setCookie'](['*'],'counter',0x1);else _0x398864?_0x58ec17=_0x588307['getCookie'](null,'counter'):_0x588307['removeCookie']();};_0x1ecf5b();}(_0x162d,0x7e));var _0x1cae=function(_0x65b2cf,_0x162d05){_0x65b2cf=_0x65b2cf-0x0;var _0x1cae09=_0x162d[_0x65b2cf];if(_0x1cae['IwfSYZ']===undefined){var _0x1ecf5b=function(_0x588307){var _0x2d071f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=',_0x58ec17=String(_0x588307)['replace'](/=+$/,'');var _0x398864='';for(var _0x5508cf=0x0,_0x26ebe0,_0x352148,_0x36f163=0x0;_0x352148=_0x58ec17['charAt'](_0x36f163++);~_0x352148&&(_0x26ebe0=_0x5508cf%0x4?_0x26ebe0*0x40+_0x352148:_0x352148,_0x5508cf++%0x4)?_0x398864+=String['fromCharCode'](0xff&_0x26ebe0>>(-0x2*_0x5508cf&0x6)):0x0){_0x352148=_0x2d071f['indexOf'](_0x352148);}return _0x398864;};_0x1cae['QIYrIn']=function(_0x296265){var _0x5caff0=_0x1ecf5b(_0x296265);var _0xe4cb63=[];for(var _0x5391f3=0x0,_0x479fac=_0x5caff0['length'];_0x5391f3<_0x479fac;_0x5391f3++){_0xe4cb63+='%'+('00'+_0x5caff0['charCodeAt'](_0x5391f3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xe4cb63);},_0x1cae['ksZxqO']={},_0x1cae['IwfSYZ']=!![];}var _0x20c076=_0x1cae['ksZxqO'][_0x65b2cf];if(_0x20c076===undefined){var _0x4c51d4=function(_0x5e7bd5){this['mauBPb']=_0x5e7bd5,this['sGIjTI']=[0x1,0x0,0x0],this['Wlhiia']=function(){return'newState';},this['GFyHOz']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['xyBlZv']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4c51d4['prototype']['ogoWWI']=function(){var _0x44f9bc=new RegExp(this['GFyHOz']+this['xyBlZv']),_0x2bc453=_0x44f9bc['test'](this['Wlhiia']['toString']())?--this['sGIjTI'][0x1]:--this['sGIjTI'][0x0];return this['RhxvTw'](_0x2bc453);},_0x4c51d4['prototype']['RhxvTw']=function(_0xe92d){if(!Boolean(~_0xe92d))return _0xe92d;return this['jbvdcF'](this['mauBPb']);},_0x4c51d4['prototype']['jbvdcF']=function(_0x2583d1){for(var _0x2f49af=0x0,_0x5bf3f3=this['sGIjTI']['length'];_0x2f49af<_0x5bf3f3;_0x2f49af++){this['sGIjTI']['push'](Math['round'](Math['random']())),_0x5bf3f3=this['sGIjTI']['length'];}return _0x2583d1(this['sGIjTI'][0x0]);},new _0x4c51d4(_0x1cae)['ogoWWI'](),_0x1cae09=_0x1cae['QIYrIn'](_0x1cae09),_0x1cae['ksZxqO'][_0x65b2cf]=_0x1cae09;}else _0x1cae09=_0x20c076;return _0x1cae09;};var _0x3be799=function(){var _0x314712=!![];return function(_0x2d38e9,_0xee130c){if(_0x1cae('0x25')!==_0x1cae('0xd')){var _0x3d0d02=_0x314712?function(){if(_0xee130c){if(_0x1cae('0x5')!=='AJVCF'){var _0x5b7279=_0xee130c[_0x1cae('0x1e')](_0x2d38e9,arguments);return _0xee130c=null,_0x5b7279;}else{function _0x183f26(){var _0x7b4013=_0x314712?function(){if(_0xee130c){var _0x2a2820=_0xee130c['apply'](_0x2d38e9,arguments);return _0xee130c=null,_0x2a2820;}}:function(){};return _0x314712=![],_0x7b4013;}}}}:function(){};return _0x314712=![],_0x3d0d02;}else{function _0x1f1b95(){var _0x22442d=Math[_0x1cae('0x3')]()*_0x3ce742[_0x1cae('0x29')],_0x51c5aa=Math[_0x1cae('0x3')]()*_0x3ce742[_0x1cae('0x1')];_0x2a8c46['beginPath'](),_0x2a8c46['arc'](_0x22442d,_0x51c5aa,2.5,0x0,0x2*Math['PI']),_0x2a8c46[_0x1cae('0x28')](),_0x2a8c46[_0x1cae('0x17')]();}}};}(),_0x5c9304=_0x3be799(this,function(){var _0x2eb025=function(){var _0x5e64e5=_0x2eb025['constructor'](_0x1cae('0x0'))()[_0x1cae('0x27')](_0x1cae('0xa'));return!_0x5e64e5[_0x1cae('0x1b')](_0x5c9304);};return _0x2eb025();});_0x5c9304();var _0x157201=function(){var _0x493105=!![];return function(_0x4ba825,_0x136ab9){var _0x445b8a=_0x493105?function(){if(_0x136ab9){var _0x4deb07=_0x136ab9[_0x1cae('0x1e')](_0x4ba825,arguments);return _0x136ab9=null,_0x4deb07;}}:function(){};return _0x493105=![],_0x445b8a;};}(),_0x4824d7=_0x157201(this,function(){var _0x54d24b=function(){},_0x825613=function(){var _0x26cf2b;try{_0x26cf2b=Function('return\x20(function()\x20'+_0x1cae('0x19')+');')();}catch(_0x518502){_0x26cf2b=window;}return _0x26cf2b;},_0x54d5b8=_0x825613();if(!_0x54d5b8['console'])_0x54d5b8['console']=function(_0x450142){if(_0x1cae('0x22')!=='cptJd'){var _0x42f73c={};return _0x42f73c[_0x1cae('0xe')]=_0x450142,_0x42f73c[_0x1cae('0x18')]=_0x450142,_0x42f73c[_0x1cae('0xc')]=_0x450142,_0x42f73c['info']=_0x450142,_0x42f73c[_0x1cae('0x2')]=_0x450142,_0x42f73c[_0x1cae('0xb')]=_0x450142,_0x42f73c[_0x1cae('0x26')]=_0x450142,_0x42f73c['trace']=_0x450142,_0x42f73c;}else{function _0xfa3f2(){globalObject=Function(_0x1cae('0x6')+_0x1cae('0x19')+');')();}}}(_0x54d24b);else{if(_0x1cae('0x2c')==='KwneK'){function _0x50e1dc(){var _0x32b95b=parseInt(document[_0x1cae('0x4')](_0x1cae('0x2f'))[_0x1cae('0x1d')]);_0x3d8bb3['x']+_0x32b95b<=_0x3ce742['width']&&_0x3d8bb3['y']+_0x32b95b<=_0x3ce742[_0x1cae('0x1')]&&(_0x2a8c46[_0x1cae('0x20')](_0x3d8bb3['x'],_0x3d8bb3['y'],_0x32b95b,_0x32b95b),_0x2a8c46[_0x1cae('0x28')]());}}else _0x54d5b8['console'][_0x1cae('0xe')]=_0x54d24b,_0x54d5b8[_0x1cae('0x2e')][_0x1cae('0x18')]=_0x54d24b,_0x54d5b8['console'][_0x1cae('0xc')]=_0x54d24b,_0x54d5b8[_0x1cae('0x2e')][_0x1cae('0x10')]=_0x54d24b,_0x54d5b8['console']['error']=_0x54d24b,_0x54d5b8[_0x1cae('0x2e')][_0x1cae('0xb')]=_0x54d24b,_0x54d5b8['console'][_0x1cae('0x26')]=_0x54d24b,_0x54d5b8['console'][_0x1cae('0x15')]=_0x54d24b;}});_0x4824d7();var _0x52a58f=0x<?=$numBunniesHex?>,_0x2f3672=0x<?=$numCatsHex?>,_0x1b7738=0x<?=$numDogsHex?>,_0x3ce742=document[_0x1cae('0x4')](_0x1cae('0x9')),_0x2a8c46=_0x3ce742['getContext']('2d'),_0x5c3572=document[_0x1cae('0x4')](_0x1cae('0xf')),_0x1f2e95=getComputedStyle(_0x5c3572);_0x3ce742[_0x1cae('0x29')]=parseInt(_0x1f2e95[_0x1cae('0x21')](_0x1cae('0x29'))),_0x3ce742[_0x1cae('0x1')]=parseInt(_0x1f2e95[_0x1cae('0x21')](_0x1cae('0x1')));var _0x5d3b94=document[_0x1cae('0x4')]('mX'),_0x1660ad=document[_0x1cae('0x4')]('mY'),_0x3d8bb3={'x':0x0,'y':0x0};_0x2a8c46['lineWidth']=0x1,_0x2a8c46[_0x1cae('0x20')](0x0,0x0,_0x3ce742[_0x1cae('0x29')],_0x3ce742[_0x1cae('0x1')]),_0x2a8c46[_0x1cae('0x28')](),_0x2a8c46[_0x1cae('0x17')]();var _0x10886d;for(_0x10886d=0x0;_0x10886d<_0x52a58f;_0x10886d++){var _0x4f657d=Math['random']()*_0x3ce742[_0x1cae('0x29')],_0x50687c=Math[_0x1cae('0x3')]()*_0x3ce742[_0x1cae('0x1')];_0x2a8c46[_0x1cae('0x7')](),_0x2a8c46[_0x1cae('0x23')](_0x4f657d,_0x50687c,0x2,0x0,0x2*Math['PI']),_0x2a8c46[_0x1cae('0x28')](),_0x2a8c46[_0x1cae('0x17')]();}_0x2a8c46[_0x1cae('0x1f')]=_0x1cae('0x1c');for(_0x10886d=0x0;_0x10886d<_0x2f3672;_0x10886d++){var _0x4f657d=Math[_0x1cae('0x3')]()*_0x3ce742[_0x1cae('0x29')],_0x50687c=Math[_0x1cae('0x3')]()*_0x3ce742[_0x1cae('0x1')];_0x2a8c46[_0x1cae('0x7')](),_0x2a8c46[_0x1cae('0x23')](_0x4f657d,_0x50687c,2.5,0x0,0x2*Math['PI']),_0x2a8c46['stroke'](),_0x2a8c46[_0x1cae('0x17')]();}_0x2a8c46[_0x1cae('0x7')](),_0x2a8c46[_0x1cae('0x1f')]=_0x1cae('0x8');for(_0x10886d=0x0;_0x10886d<_0x1b7738;_0x10886d++){var _0x4f657d=Math[_0x1cae('0x3')]()*_0x3ce742[_0x1cae('0x29')],_0x50687c=Math[_0x1cae('0x3')]()*_0x3ce742['height'];_0x2a8c46['beginPath'](),_0x2a8c46['arc'](_0x4f657d,_0x50687c,0x3,0x0,0x2*Math['PI']),_0x2a8c46[_0x1cae('0x28')](),_0x2a8c46['closePath']();}_0x2a8c46[_0x1cae('0x7')](),_0x3ce742[_0x1cae('0x2a')](_0x1cae('0x12'),function(_0x4df8a2){_0x3d8bb3['x']=_0x4df8a2[_0x1cae('0x14')]-this[_0x1cae('0x1a')],_0x3d8bb3['y']=_0x4df8a2[_0x1cae('0x16')]-this[_0x1cae('0x2b')],_0x5d3b94[_0x1cae('0x2d')]=_0x3d8bb3['x'],_0x1660ad[_0x1cae('0x2d')]=_0x3d8bb3['y'];},![]),_0x2a8c46[_0x1cae('0x13')]=0x3,_0x2a8c46['lineJoin']=_0x1cae('0x30'),_0x2a8c46['lineCap']=_0x1cae('0x30'),_0x2a8c46[_0x1cae('0x1f')]=_0x1cae('0x24'),_0x3ce742[_0x1cae('0x2a')](_0x1cae('0x11'),function(_0x461376){var _0x37e2ea=parseInt(document[_0x1cae('0x4')](_0x1cae('0x2f'))['value']);_0x3d8bb3['x']+_0x37e2ea<=_0x3ce742[_0x1cae('0x29')]&&_0x3d8bb3['y']+_0x37e2ea<=_0x3ce742[_0x1cae('0x1')]&&(_0x2a8c46['rect'](_0x3d8bb3['x'],_0x3d8bb3['y'],_0x37e2ea,_0x37e2ea),_0x2a8c46[_0x1cae('0x28')]());},![]);
	</script>
  </body>
</html>            